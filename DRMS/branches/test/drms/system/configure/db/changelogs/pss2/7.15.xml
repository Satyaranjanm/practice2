<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!-- NOTE !!!! -->
    <!-- If this file is moved, the attribute 'logicalFilePath' *MUST* be 
        added to the databaseChangeLog tag with a value equal to the previous relative 
        path of this file from drms/system/configure. For example, if this file was 
        in trunk/drms/system/configure/db/changelogs/pss2/changelogs.xml and was 
        moved to trunk/drms/system/configure/database/pss2/chnagelogs.xml, the attribute 
        logicalFilePath="db/changelogs/pss2/changelogs.xml" must be set or else the 
        changesets within this file will be re-applied to existing databases. This 
        could result in undesired behavior. See DRMS-5553 for more info. -->
    <!-- !!!! -->
    <!-- See http://liquibase.org/manual/home for documentation -->	
	
	<changeSet id="1" author="Frank">
		<comment>
            DRMS-8020 SCE 2013 RTP: RTP programs consolidation
        </comment>
		<sql>
			CREATE TABLE IF NOT EXISTS `participant_rtp_strategy`(`UUID` VARCHAR(32) NOT NULL , `creationTime` DATETIME ,  `program_participant_uuid` VARCHAR(32) , `name` VARCHAR(64) , `value0` VARCHAR(16) DEFAULT 'Normal', `value1` VARCHAR(16) DEFAULT 'Normal', `value2` VARCHAR(16) DEFAULT 'Normal', `value3` VARCHAR(16) DEFAULT 'Normal' , `value4` VARCHAR(16) DEFAULT 'Normal' , `value5` VARCHAR(16) DEFAULT 'Normal' , `value6` VARCHAR(16) DEFAULT 'Normal' , `value7` VARCHAR(16) DEFAULT 'Normal' , `value8` VARCHAR(16) DEFAULT 'Normal' , `value9` VARCHAR(16) DEFAULT 'Normal' , `value10` VARCHAR(16) DEFAULT 'Normal' , `value11` VARCHAR(16) DEFAULT 'Normal' , `value12` VARCHAR(16) DEFAULT 'Normal' , `value13` VARCHAR(16) DEFAULT 'Normal' , `value14` VARCHAR(16) DEFAULT 'Normal' , `value15` VARCHAR(16) DEFAULT 'Normal' , `value16` VARCHAR(16) DEFAULT 'Normal' , `value17` VARCHAR(16) DEFAULT 'Normal' , `value18` VARCHAR(16) DEFAULT 'Normal' , `value19` VARCHAR(16) DEFAULT 'Normal' , `value20` VARCHAR(16) DEFAULT 'Normal' , `value21` VARCHAR(16) DEFAULT 'Normal' , `value22` VARCHAR(16) DEFAULT 'Normal' , `value23` VARCHAR(16) DEFAULT 'Normal' , PRIMARY KEY (`UUID`) );						
	</sql>
    </changeSet>
	
	 <changeSet id="2" author="Frank">
        <comment>
			DRMS-8023 add secondary account number
        </comment>
		<sql>		        
			insert into core_property(uuid, version, propertyName,
			stringValue, booleanValue, doubleValue, textValue, type,
			creator, modifier, creationTime, modifiedTime) values
			(REPLACE(uuid(), '-', ''), 0, 'Use_Secondary_Account_for_APX',
			null, false, null, null, 'Boolean', 'script', null, now(),
			null);
		</sql>
    </changeSet>
	<changeSet id="3" author="Frank">
        <comment>
           DRMS-8023 add secondary account number
        </comment>
		<sql>
			ALTER TABLE participant ADD COLUMN secondary_account varchar(128) DEFAULT null;
			ALTER TABLE participant ADD UNIQUE `second_account_key` (`secondary_account`);
		</sql>
    </changeSet>
	 <changeSet id="4" author="liu">
        <comment>
			DRMS-8115 add enroll all participants 
        </comment>
		<sql>
			insert into core_property(uuid, version, propertyName,
			stringValue, booleanValue, doubleValue, textValue, type,
			creator, modifier, creationTime, modifiedTime) values
			(REPLACE(uuid(), '-', ''), 0, 'Enroll_All_Participants_for_APX',
			null, false, null, null, 'Boolean', 'script', null, now(),
			null);
		</sql>
    </changeSet>
	<changeSet id="5" author="Linda">
        <comment>
			DRMS-8117 add secondary program name and core property to switch CBP and DRC event creation check logic via nomination file 
        </comment>
		<sql>		        
			ALTER TABLE program ADD COLUMN secondaryUtilityName varchar(255) DEFAULT null;
			insert into core_property(uuid, version, propertyName,
			stringValue, booleanValue, doubleValue, textValue, type,
			creator, modifier, creationTime, modifiedTime) values
			(REPLACE(uuid(), '-', ''), 0, 'feature.useSecondaryUtilityNameForAPX',
			null, false, null, null, 'Boolean', 'script', null, now(),
			null);
		</sql>
    </changeSet>
	<changeSet id="6" author="Linda">
        <comment>
			DRMS-8143 add location column in Event table
        </comment>
		<sql>
			ALTER TABLE event ADD COLUMN locationInfo varchar(255) DEFAULT null;
		</sql>
    </changeSet>

</databaseChangeLog>