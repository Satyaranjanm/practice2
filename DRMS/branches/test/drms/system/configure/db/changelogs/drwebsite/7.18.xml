<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!-- NOTE !!!! -->
    <!-- If this file is moved, the attribute 'logicalFilePath' *MUST* be 
        added to the databaseChangeLog tag with a value equal to the previous relative 
        path of this file from drms/system/configure. For example, if this file was 
        in trunk/drms/system/configure/db/changelogs/pss2/changelogs.xml and was 
        moved to trunk/drms/system/configure/database/pss2/chnagelogs.xml, the attribute 
        logicalFilePath="db/changelogs/pss2/changelogs.xml" must be set or else the 
        changesets within this file will be re-applied to existing databases. This 
        could result in undesired behavior. See DRMS-5553 for more info. -->
    <!-- !!!! -->
    <!-- See http://liquibase.org/manual/home for documentation -->	
	<changeSet id="1" author="liu">		
		<comment>DRMS-8258	update program and prodct information</comment>
		<sql>
			alter table program add productDisplayName varchar(255);
			alter table program add irProgram bit(1);

			update program
			set utilityName = 'Agricultural &amp; Pumping Interruptible Program (AP-I)',productDisplayName = 'AP-I', irProgram = true
			where programClass = 'API';

			update program
			set utilityName = 'Time-of-Use Base Interruptible Program (TOU-BIP)',productDisplayName = 'BIP', irProgram = true
			where programClass = 'BIP';

			update program p
			set p.utilityName = 'Summer Discount Plan (SDP)',p.productDisplayName = p.name, irProgram = true
			where p.programClass = 'SDP';

			update program p
			set p.utilityName = 'Capacity Bidding Program (CBP)',p.productDisplayName = p.name, irProgram = true
			where p.programClass = 'CBP';

			insert into `program` (`uuid`, `name`, `utilityName`, `programClass`, `longProgramName`, `creationTime`, `product`, `productDisplayName`, `irProgram`) 
			values(REPLACE(UUID(), '-', ''),'DBP DA','Demand Bidding Program (DBP)','DBP','DBP',NOW(),'DBP DA','DBP DA',false);
			insert into `program` (`uuid`, `name`, `utilityName`, `programClass`, `longProgramName`, `creationTime`, `product`, `productDisplayName`, `irProgram`) 
			values(REPLACE(UUID(), '-', ''),'RTP','Real Time Pricing (RTP)','RTP','RTP',NOW(),'RTP','RTP',false);
			insert into `program` (`uuid`, `name`, `utilityName`, `programClass`, `longProgramName`, `creationTime`, `product`, `productDisplayName`, `irProgram`) 
			values(REPLACE(UUID(), '-', ''),'SAI','Summer Advantage Incentive (SAI, also known as Critical Peak Pricing, CPP)','CPP','SAI',NOW(),'SAI','SAI',false);
			insert into `program` (`uuid`, `name`, `utilityName`, `programClass`, `longProgramName`, `creationTime`, `product`, `productDisplayName`, `irProgram`) 
			values(REPLACE(UUID(), '-', ''),'SPD','Save Power Day (SPD)','SPD','SPD',NOW(),'SPD','SPD',false);
			
		</sql>
	</changeSet>
</databaseChangeLog>